var Pe=Object.defineProperty;var je=(e,t,n)=>t in e?Pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var G=(e,t,n)=>je(e,typeof t!="symbol"?t+"":t,n);import{r as a,C as T,aK as we,d as R,aL as ze,R as w,B as Ne,h as Ie,m as Le,u as S,q as Me,a3 as Be,X as Re,ax as He,a0 as ne,aE as Ge,aF as We,aG as Q,aH as Ae,aI as X}from"./index-HwotxWfD.js";import{r as A,k as ae,P as Te,D as _e,l as Ve,o as De}from"./cache-CCCZuo6w.js";const oe=a.createContext({});var Xe=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function ie(e){return typeof e=="number"?`${e} ${e} auto`:/^\d+(\.\d+)?(px|em|rem|%)$/.test(e)?`0 0 ${e}`:e}const Fe=["xs","sm","md","lg","xl","xxl"],Je=a.forwardRef((e,t)=>{const{getPrefixCls:n,direction:i}=a.useContext(T),{gutter:r,wrap:o}=a.useContext(oe),{prefixCls:c,span:m,order:d,offset:b,push:E,pull:z,className:f,children:P,flex:p,style:j}=e,y=Xe(e,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),g=n("col",c),[I,v,C]=we(g),M={};let x={};Fe.forEach(l=>{let u={};const W=e[l];typeof W=="number"?u.span=W:typeof W=="object"&&(u=W||{}),delete y[l],x=Object.assign(Object.assign({},x),{[`${g}-${l}-${u.span}`]:u.span!==void 0,[`${g}-${l}-order-${u.order}`]:u.order||u.order===0,[`${g}-${l}-offset-${u.offset}`]:u.offset||u.offset===0,[`${g}-${l}-push-${u.push}`]:u.push||u.push===0,[`${g}-${l}-pull-${u.pull}`]:u.pull||u.pull===0,[`${g}-rtl`]:i==="rtl"}),u.flex&&(x[`${g}-${l}-flex`]=!0,M[`--${g}-${l}-flex`]=ie(u.flex))});const $=R(g,{[`${g}-${m}`]:m!==void 0,[`${g}-order-${d}`]:d,[`${g}-offset-${b}`]:b,[`${g}-push-${E}`]:E,[`${g}-pull-${z}`]:z},f,x,v,C),s={};if(r&&r[0]>0){const l=r[0]/2;s.paddingLeft=l,s.paddingRight=l}return p&&(s.flex=ie(p),o===!1&&!s.minWidth&&(s.minWidth=0)),I(a.createElement("div",Object.assign({},y,{style:Object.assign(Object.assign(Object.assign({},s),j),M),className:$,ref:t}),P))});function Ke(e,t){const n=[void 0,void 0],i=Array.isArray(e)?e:[e,void 0],r=t||{xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0};return i.forEach((o,c)=>{if(typeof o=="object"&&o!==null)for(let m=0;m<A.length;m++){const d=A[m];if(r[d]&&o[d]!==void 0){n[c]=o[d];break}}else n[c]=o}),n}var qe=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function re(e,t){const[n,i]=a.useState(typeof e=="string"?e:""),r=()=>{if(typeof e=="string"&&i(e),typeof e=="object")for(let o=0;o<A.length;o++){const c=A[o];if(!t||!t[c])continue;const m=e[c];if(m!==void 0){i(m);return}}};return a.useEffect(()=>{r()},[JSON.stringify(e),t]),n}const Ue=a.forwardRef((e,t)=>{const{prefixCls:n,justify:i,align:r,className:o,style:c,children:m,gutter:d=0,wrap:b}=e,E=qe(e,["prefixCls","justify","align","className","style","children","gutter","wrap"]),{getPrefixCls:z,direction:f}=a.useContext(T),P=ae(!0,null),p=re(r,P),j=re(i,P),y=z("row",n),[g,I,v]=ze(y),C=Ke(d,P),M=R(y,{[`${y}-no-wrap`]:b===!1,[`${y}-${j}`]:j,[`${y}-${p}`]:p,[`${y}-rtl`]:f==="rtl"},o,I,v),x={},$=C[0]!=null&&C[0]>0?C[0]/-2:void 0;$&&(x.marginLeft=$,x.marginRight=$);const[s,l]=C;x.rowGap=l;const u=a.useMemo(()=>({gutter:[s,l],wrap:b}),[s,l,b]);return g(a.createElement(oe.Provider,{value:u},a.createElement("div",Object.assign({},E,{className:M,style:Object.assign(Object.assign({},x),c),ref:t}),m)))}),Z=w.createContext({});Z.Consumer;var se=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};const Ye=e=>{var{prefixCls:t,className:n,avatar:i,title:r,description:o}=e,c=se(e,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:m}=a.useContext(T),d=m("list",t),b=R(`${d}-item-meta`,n),E=w.createElement("div",{className:`${d}-item-meta-content`},r&&w.createElement("h4",{className:`${d}-item-meta-title`},r),o&&w.createElement("div",{className:`${d}-item-meta-description`},o));return w.createElement("div",Object.assign({},c,{className:b}),i&&w.createElement("div",{className:`${d}-item-meta-avatar`},i),(r||o)&&E)},Qe=w.forwardRef((e,t)=>{const{prefixCls:n,children:i,actions:r,extra:o,styles:c,className:m,classNames:d,colStyle:b}=e,E=se(e,["prefixCls","children","actions","extra","styles","className","classNames","colStyle"]),{grid:z,itemLayout:f}=a.useContext(Z),{getPrefixCls:P,list:p}=a.useContext(T),j=$=>{var s,l;return R((l=(s=p==null?void 0:p.item)===null||s===void 0?void 0:s.classNames)===null||l===void 0?void 0:l[$],d==null?void 0:d[$])},y=$=>{var s,l;return Object.assign(Object.assign({},(l=(s=p==null?void 0:p.item)===null||s===void 0?void 0:s.styles)===null||l===void 0?void 0:l[$]),c==null?void 0:c[$])},g=()=>{let $=!1;return a.Children.forEach(i,s=>{typeof s=="string"&&($=!0)}),$&&a.Children.count(i)>1},I=()=>f==="vertical"?!!o:!g(),v=P("list",n),C=r&&r.length>0&&w.createElement("ul",{className:R(`${v}-item-action`,j("actions")),key:"actions",style:y("actions")},r.map(($,s)=>w.createElement("li",{key:`${v}-item-action-${s}`},$,s!==r.length-1&&w.createElement("em",{className:`${v}-item-action-split`})))),M=z?"div":"li",x=w.createElement(M,Object.assign({},E,z?{}:{ref:t},{className:R(`${v}-item`,{[`${v}-item-no-flex`]:!I()},m)}),f==="vertical"&&o?[w.createElement("div",{className:`${v}-item-main`,key:"content"},i,C),w.createElement("div",{className:R(`${v}-item-extra`,j("extra")),key:"extra",style:y("extra")},o)]:[i,C,Ne(o,{key:"extra"})]);return z?w.createElement(Je,{ref:t,flex:1,style:b},x):x}),le=Qe;le.Meta=Ye;const Ze=e=>{const{listBorderedCls:t,componentCls:n,paddingLG:i,margin:r,itemPaddingSM:o,itemPaddingLG:c,marginLG:m,borderRadiusLG:d}=e;return{[t]:{border:`${S(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:d,[`${n}-header,${n}-footer,${n}-item`]:{paddingInline:i},[`${n}-pagination`]:{margin:`${S(r)} ${S(m)}`}},[`${t}${n}-sm`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:o}},[`${t}${n}-lg`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:c}}}},ke=e=>{const{componentCls:t,screenSM:n,screenMD:i,marginLG:r,marginSM:o,margin:c}=e;return{[`@media screen and (max-width:${i}px)`]:{[t]:{[`${t}-item`]:{[`${t}-item-action`]:{marginInlineStart:r}}},[`${t}-vertical`]:{[`${t}-item`]:{[`${t}-item-extra`]:{marginInlineStart:r}}}},[`@media screen and (max-width: ${n}px)`]:{[t]:{[`${t}-item`]:{flexWrap:"wrap",[`${t}-action`]:{marginInlineStart:o}}},[`${t}-vertical`]:{[`${t}-item`]:{flexWrap:"wrap-reverse",[`${t}-item-main`]:{minWidth:e.contentWidth},[`${t}-item-extra`]:{margin:`auto auto ${S(c)}`}}}}}},et=e=>{const{componentCls:t,antCls:n,controlHeight:i,minHeight:r,paddingSM:o,marginLG:c,padding:m,itemPadding:d,colorPrimary:b,itemPaddingSM:E,itemPaddingLG:z,paddingXS:f,margin:P,colorText:p,colorTextDescription:j,motionDurationSlow:y,lineWidth:g,headerBg:I,footerBg:v,emptyTextPadding:C,metaMarginBottom:M,avatarMarginRight:x,titleMarginBottom:$,descriptionFontSize:s}=e;return{[t]:Object.assign(Object.assign({},Me(e)),{position:"relative","*":{outline:"none"},[`${t}-header`]:{background:I},[`${t}-footer`]:{background:v},[`${t}-header, ${t}-footer`]:{paddingBlock:o},[`${t}-pagination`]:{marginBlockStart:c,[`${n}-pagination-options`]:{textAlign:"start"}},[`${t}-spin`]:{minHeight:r,textAlign:"center"},[`${t}-items`]:{margin:0,padding:0,listStyle:"none"},[`${t}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:d,color:p,[`${t}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${t}-item-meta-avatar`]:{marginInlineEnd:x},[`${t}-item-meta-content`]:{flex:"1 0",width:0,color:p},[`${t}-item-meta-title`]:{margin:`0 0 ${S(e.marginXXS)} 0`,color:p,fontSize:e.fontSize,lineHeight:e.lineHeight,"> a":{color:p,transition:`all ${y}`,"&:hover":{color:b}}},[`${t}-item-meta-description`]:{color:j,fontSize:s,lineHeight:e.lineHeight}},[`${t}-item-action`]:{flex:"0 0 auto",marginInlineStart:e.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${S(f)}`,color:j,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${t}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:g,height:e.calc(e.fontHeight).sub(e.calc(e.marginXXS).mul(2)).equal(),transform:"translateY(-50%)",backgroundColor:e.colorSplit}}},[`${t}-empty`]:{padding:`${S(m)} 0`,color:j,fontSize:e.fontSizeSM,textAlign:"center"},[`${t}-empty-text`]:{padding:C,color:e.colorTextDisabled,fontSize:e.fontSize,textAlign:"center"},[`${t}-item-no-flex`]:{display:"block"}}),[`${t}-grid ${n}-col > ${t}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:P,paddingBlock:0,borderBlockEnd:"none"},[`${t}-vertical ${t}-item`]:{alignItems:"initial",[`${t}-item-main`]:{display:"block",flex:1},[`${t}-item-extra`]:{marginInlineStart:c},[`${t}-item-meta`]:{marginBlockEnd:M,[`${t}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:$,color:p,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}},[`${t}-item-action`]:{marginBlockStart:m,marginInlineStart:"auto","> li":{padding:`0 ${S(m)}`,"&:first-child":{paddingInlineStart:0}}}},[`${t}-split ${t}-item`]:{borderBlockEnd:`${S(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${t}-split ${t}-header`]:{borderBlockEnd:`${S(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-split${t}-empty ${t}-footer`]:{borderTop:`${S(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-loading ${t}-spin-nested-loading`]:{minHeight:i},[`${t}-split${t}-something-after-last-item ${n}-spin-container > ${t}-items > ${t}-item:last-child`]:{borderBlockEnd:`${S(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-lg ${t}-item`]:{padding:z},[`${t}-sm ${t}-item`]:{padding:E},[`${t}:not(${t}-vertical)`]:{[`${t}-item-no-flex`]:{[`${t}-item-action`]:{float:"right"}}}}},tt=e=>({contentWidth:220,itemPadding:`${S(e.paddingContentVertical)} 0`,itemPaddingSM:`${S(e.paddingContentVerticalSM)} ${S(e.paddingContentHorizontal)}`,itemPaddingLG:`${S(e.paddingContentVerticalLG)} ${S(e.paddingContentHorizontalLG)}`,headerBg:"transparent",footerBg:"transparent",emptyTextPadding:e.padding,metaMarginBottom:e.padding,avatarMarginRight:e.padding,titleMarginBottom:e.paddingSM,descriptionFontSize:e.fontSize}),nt=Ie("List",e=>{const t=Le(e,{listBorderedCls:`${e.componentCls}-bordered`,minHeight:e.controlHeightLG});return[et(t),Ze(t),ke(t)]},tt);var it=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function rt(e,t){const{pagination:n=!1,prefixCls:i,bordered:r=!1,split:o=!0,className:c,rootClassName:m,style:d,children:b,itemLayout:E,loadMore:z,grid:f,dataSource:P=[],size:p,header:j,footer:y,loading:g=!1,rowKey:I,renderItem:v,locale:C}=e,M=it(e,["pagination","prefixCls","bordered","split","className","rootClassName","style","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),x=n&&typeof n=="object"?n:{},[$,s]=a.useState(x.defaultCurrent||1),[l,u]=a.useState(x.defaultPageSize||10),{getPrefixCls:W,direction:ce,className:de,style:me}=Be("list"),{renderEmpty:J}=a.useContext(T),ge={current:1,total:0,position:"bottom"},k=h=>(N,B)=>{var Y;s(N),u(B),n&&((Y=n==null?void 0:n[h])===null||Y===void 0||Y.call(n,N,B))},ue=k("onChange"),fe=k("onShowSizeChange"),pe=(h,N)=>{if(!v)return null;let B;return typeof I=="function"?B=I(h):I?B=h[I]:B=h.key,B||(B=`list-item-${N}`),a.createElement(a.Fragment,{key:B},v(h,N))},$e=!!(z||n||y),O=W("list",i),[he,ye,xe]=nt(O);let H=g;typeof H=="boolean"&&(H={spinning:H});const K=!!(H!=null&&H.spinning),Se=Re(p);let _="";switch(Se){case"large":_="lg";break;case"small":_="sm";break}const ve=R(O,{[`${O}-vertical`]:E==="vertical",[`${O}-${_}`]:_,[`${O}-split`]:o,[`${O}-bordered`]:r,[`${O}-loading`]:K,[`${O}-grid`]:!!f,[`${O}-something-after-last-item`]:$e,[`${O}-rtl`]:ce==="rtl"},de,c,m,ye,xe),L=He(ge,{total:P.length,current:$,pageSize:l},n||{}),be=Math.ceil(L.total/L.pageSize);L.current=Math.min(L.current,be);const ee=n&&a.createElement("div",{className:R(`${O}-pagination`)},a.createElement(Te,Object.assign({align:"end"},L,{onChange:ue,onShowSizeChange:fe})));let q=ne(P);n&&P.length>(L.current-1)*L.pageSize&&(q=ne(P).splice((L.current-1)*L.pageSize,L.pageSize));const Ce=Object.keys(f||{}).some(h=>["xs","sm","md","lg","xl","xxl"].includes(h)),te=ae(Ce),V=a.useMemo(()=>{for(let h=0;h<A.length;h+=1){const N=A[h];if(te[N])return N}},[te]),Oe=a.useMemo(()=>{if(!f)return;const h=V&&f[V]?f[V]:f.column;if(h)return{width:`${100/h}%`,maxWidth:`${100/h}%`}},[JSON.stringify(f),V]);let U=K&&a.createElement("div",{style:{minHeight:53}});if(q.length>0){const h=q.map(pe);U=f?a.createElement(Ue,{gutter:f.gutter},a.Children.map(h,N=>a.createElement("div",{key:N==null?void 0:N.key,style:Oe},N))):a.createElement("ul",{className:`${O}-items`},h)}else!b&&!K&&(U=a.createElement("div",{className:`${O}-empty-text`},(C==null?void 0:C.emptyText)||(J==null?void 0:J("List"))||a.createElement(_e,{componentName:"List"})));const D=L.position,Ee=a.useMemo(()=>({grid:f,itemLayout:E}),[JSON.stringify(f),E]);return he(a.createElement(Z.Provider,{value:Ee},a.createElement("div",Object.assign({ref:t,style:Object.assign(Object.assign({},me),d),className:ve},M),(D==="top"||D==="both")&&ee,j&&a.createElement("div",{className:`${O}-header`},j),a.createElement(Ge,Object.assign({},H),U,b),y&&a.createElement("div",{className:`${O}-footer`},y),z||(D==="bottom"||D==="both")&&ee)))}const at=a.forwardRef(rt),F=at;F.Item=le;class ot{constructor(){G(this,"cache");G(this,"pageSize",300);G(this,"cursor");G(this,"loading",!0);G(this,"nextCursor",null);G(this,"previousCursor",null);We(this),this.cache=new Ve(3)}get data(){return this.cache.get(this.cursor??"initial")}async fetchPage(t){if(this.cache.has(t??"initial")){Q(()=>{this.cursor=t});return}this.loading=!0;try{const n=await De({params:{pageSize:this.pageSize,cursor:t}});Q(()=>{this.cache.set(t??"initial",n.results),this.cursor=t??"initial",this.nextCursor=n.next,this.previousCursor=n.previous})}catch(n){console.error(n)}finally{Q(()=>{this.loading=!1})}}}const dt=Ae(()=>{const[e]=a.useState(()=>new ot),t=a.useRef(null);return a.useEffect(()=>{e.fetchPage()},[]),a.useEffect(()=>{const n=t.current;if(!n)return;const i=o=>{o[0].isIntersecting&&e.nextCursor!=null&&!e.loading&&e.fetchPage(e.nextCursor)},r=new IntersectionObserver(i,{threshold:.1});return r.observe(n),()=>{r.unobserve(n),r.disconnect()}},[]),X.jsx(F,{loadMore:X.jsx("div",{style:{width:"100%",height:"100px"},ref:t}),loading:e.loading,dataSource:e.data,renderItem:n=>X.jsx(F.Item,{children:X.jsx(F.Item.Meta,{title:n.name,description:n.desc})},n.id)})});export{dt as default};
